# C++提高编程
 * 本阶段主要针对C++**泛型编程**和**STL**技术做详细解释，探讨C++更深层的使用  
  
# 模板
## 模板的概念
模板就是建立**通用的模具**，大大**提高复用性**  
模板的特点：  
 * 模板不可以直接使用，它只是一个框架  
 * 模板的通用并不是万能的  
  
## 函数模板
 * C++另一种编程思想称为**泛型编程**，主要利用的技术就是模板  
 * C++提供两种模板机制：**函数模板**和**类模板**  
### 函数模板语法
函数模板作用：  
建立一个通用函数，其函数返回值类型和形参类型可以不具体制定，用一个**虚拟的类型**来代表。  
  
**语法：**  
template<typename T>  
函数声明或定义  
**解释：**  
template —— 声明创建模板  
typename —— 表面其后面的符号时一种数据类型，可以用class代替  
T —— 通用的数据类型，名称可以替换，通常为大写字母  
  
总结：  
 * 函数模板利用关键字template  
 * 使用函数模板有两种方式：自动类型推导、显示指定类型（函数名<数据类型>(参数);）  
 * 模板的目的是为了提高复用性，将类型参数化  
  
### 函数模板注意事项
 * 自动类型推导，必须推导出一致的数据类型T，才可以使用  
 * 模板必须要确定出T的数据类型，才可以使用  
  
### 函数模板案例
案例描述：  
 * 利用函数模板封装一个排序的函数，可以对**不同数据类型数组**进行排序  
 * 排序规则从大到小，排序算法为**选择排序**  
 * 分别利用**char数组**和**int数组**进行测试  
  
### 普通函数与函数模板的区别
 * 普通函数调用时可以发生自动类型转换（隐式类型转换）  
 * 函数模板调用时，如果利用自动类型推导，不会发生隐式类型转换  
 * 如果利用显示指定类型的方式，可以发生隐式类型转换  
  
总结：建议使用显示指定类型的方式 调用幻术模板，因为可以自己确定通用类型T  
  
### 普通函数与函数模板的调用规则
 1. 如果函数模板和普通函数都可以实现，优先调用普通函数  
 2. 可以通过空模板参数列表来强制调用函数模板  
 3. 函数模板也可以发生重载  
 4. 如果函数模板可以产生更好的匹配，优先调用函数模板  
  
总结：既然提供了函数模板，最好就不要提供普通函数，否则容易出现二义性  
  
### 模板的局限性
例如：  
 template<class T>  
 void f(T a, T b){  
    a = b;  
 }  
 在上述代码中提供的赋值操作，如果传入的a和b时一个数组，就无法实现了  
  
 template<class T>  
 void f(T a, T b){  
    if(a > b) { ... }  
 }  
 在上述代码中，如果T的数据类型传入的是像Person这样的自定义数据类型，也无法正常运行  
  
因此C++为了解决这种问题，提供模板的重载，可以为这些**特定的类型**提供**具体化的模板**  
例如：重载template<> bool myCompare(Person& p1, Person& p2) { ... }  
  
总结：  
 * 利用具体化的模板，可以解决自定义类型的通用化  
 * 学习模板并不是为了写模板，而是在STL中能够运用系统提供的模板  
  
## 类模板
作用：建立一个通用类，类中的成员 数据类型可以不具体指定，用一个**虚拟的类型**来代表  
  
### 类模板语法
**语法：**  
 template<typename T>  
 类  
**解释：**  
template —— 声明创建模板  
typename —— 表明其后面的符号时一种数据类型，可以用class代替  
T —— 通用的数据类型，名称可以替换，通常为大写字母  
  
### 类模板与函数模板区别
 1. 类模板没有自动类型推导的使用方式  
 2. 类模板在模板参数列表中可以有默认参数  
  
总结：  
 * 类模板使用只能用显示指定类型方式  
 * 类模板中的模板参数列表可以有默认参数  
  
### 类模板中成员函数创建时机
类模板中成员函数和普通类中成员函数创建时机是有区别的：  
 * 普通类中的成员函数一开始就可以创建  
 * 类模板中的成员函数在调用时才创建  
  
### 类模板对象做函数参数
类模板实例化出的对象，向函数传参的方式有三种：  
 1. 指定传入的类型（最常用） —— 直接显示对象的数据类型  
 2. 参数模板化 —— 将对象中的参数变为模板进行传递  
 3. 整个类模板化 —— 将这个对象类型 模板化进行传递  
  
### 类模板与继承
当类模板碰到继承时，需要注意：  
 * 当子类继承的父类是一个类模板时，子类在声明的时候，要指定出父类中T的类型  
 * 如果不指定，编译器无法给子类分配内存  
 * 如果向灵活制定出父类中T的类型，子类也需变为类模板  
  
